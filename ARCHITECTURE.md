# üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Caesar Cipher Cracker

## –û–±–∑–æ—Ä

–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `caesar.py` (~970 —Å—Ç—Ä–æ–∫) —Å —á—ë—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –º–æ–¥—É–ª–µ–π:

```
caesar.py
‚îú‚îÄ‚îÄ –õ–ò–ù–ì–í–ò–°–¢–ò–ß–ï–°–ö–ò–ï –ö–û–ù–°–¢–ê–ù–¢–´    # –ß–∞—Å—Ç–æ—Ç—ã, –±–∏–≥—Ä–∞–º–º—ã, —Å—É—Ñ—Ñ–∏–∫—Å—ã (RU + EN)
‚îú‚îÄ‚îÄ DATA CLASSES                 # ShiftResult, Segment (frozen dataclasses)
‚îú‚îÄ‚îÄ Dictionary                   # Singleton, lazy loading, dual-language
‚îú‚îÄ‚îÄ Decryptor                    # str.translate() + LRU cache
‚îú‚îÄ‚îÄ –°–ö–û–†–ï–†–´                      # chi_squared, bigram_score, IC, dict_score, stem_dict_score
‚îú‚îÄ‚îÄ Analyzer                     # –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Å–∫–æ—Ä–æ–≤
‚îú‚îÄ‚îÄ MixedDetector                # –°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ –¥–ª—è —Å–º–µ—à–∞–Ω–Ω—ã—Ö —à–∏—Ñ—Ä–æ–≤
‚îú‚îÄ‚îÄ UI                           # Rich TUI —Å fallback –Ω–∞ plain text
‚îî‚îÄ‚îÄ CLI                          # argparse + run()
```

## –ö–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –î–≤—É—è–∑—ã—á–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å (Singleton + Lazy Loading)

`Dictionary` ‚Äî —Å–∏–Ω–≥–ª—Ç–æ–Ω —Å —Ä–∞–∑–¥–µ–ª—å–Ω–æ–π –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π RU/EN.
–ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º, —Ä—É—Å—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è (–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç).

- –ò—Å—Ç–æ—á–Ω–∏–∫: Wiktionary (kaikki.org)
- RU: 2.2M —Å–ª–æ–≤, EN: 4.6M —Å–ª–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: `2 ‚â§ len ‚â§ 50`, —Ç–æ–ª—å–∫–æ `isalpha()`
- –ë–∞–∑–æ–≤—ã–µ —Å–ª–æ–≤–∞ –∑–∞—à–∏—Ç—ã –∫–∞–∫ fallback

### 2. –î–µ—à–∏—Ñ—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ `str.translate()`

`Decryptor._table()` —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—É –∑–∞–º–µ–Ω—ã –æ–¥–∏–Ω —Ä–∞–∑, `str.translate()` ‚Äî O(n) –Ω–∞ —É—Ä–æ–≤–Ω–µ C.
–ö—ç—à `@lru_cache(maxsize=128)` –¥–ª—è –ø–∞—Ä `(shift, lang)`.

### 3. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Å–ª–æ–≤–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫

`dict_score()` ‚Äî 4 —É—Ä–æ–≤–Ω—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞:
1. –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
2. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —ë‚Üí–µ (—Ç–æ–ª—å–∫–æ RU)
3. –°—Ç–µ–º–º–∏–Ω–≥ (–æ—Ç—Ä–µ–∑–∫–∞ —Å—É—Ñ—Ñ–∏–∫—Å–æ–≤) + –ø–æ–∏—Å–∫ –æ—Å–Ω–æ–≤—ã
4. –°—Ç–µ–º–º–∏–Ω–≥ + –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

`stem_dict_score()` ‚Äî –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π: –æ–±—Ä–µ–∑–∞–µ—Ç –ø–æ 1 —Å–∏–º–≤–æ–ª—É –ø–æ–∫–∞ –Ω–µ –Ω–∞–π–¥—ë—Ç –∫–æ—Ä–µ–Ω—å ‚â•3 (RU) / ‚â•2 (EN).

### 4. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –≤–µ—Å–∞

Chi-squared –Ω–∞–¥—ë–∂–µ–Ω –Ω–∞ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–∞—Ö, –Ω–æ –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏—Ö.
–ë–∏–≥—Ä–∞–º–º—ã –Ω–∞–æ–±–æ—Ä–æ—Ç ‚Äî —Ä–∞–±–æ—Ç–∞—é—Ç –¥–∞–∂–µ –Ω–∞ 4-5 –±—É–∫–≤–∞—Ö.

–í–µ—Å–∞ –º–µ–Ω—è—é—Ç—Å—è –ø–ª–∞–≤–Ω–æ:
- `‚â•100 –±—É–∫–≤`: chi¬≤=35%, dict=35%, bigrams=10%, stem=20%
- `<10 –±—É–∫–≤`: bigrams=45%, dict=30%, stem=20%, chi¬≤=5%

### 5. –î–µ—Ç–µ–∫—Ç–æ—Ä —Å–º–µ—à–∞–Ω–Ω—ã—Ö —à–∏—Ñ—Ä–æ–≤

`MixedDetector` ‚Äî —Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ + —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ:
1. –î–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏: –æ–∫–Ω–æ 40 —Å–∏–º–≤–æ–ª–æ–≤ ‚Üí –ª—É—á—à–∏–π –∫–ª—é—á (–±—ã—Å—Ç—Ä–æ: chi¬≤ + bigrams)
2. –ö–∞—Ä—Ç–∞ —Å–¥–≤–∏–≥–æ–≤ —Å–≥–ª–∞–∂–∏–≤–∞–µ—Ç—Å—è –º–∞–∂–æ—Ä–∏—Ç–∞—Ä–Ω—ã–º –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ–º (–æ–∫–Ω–æ 15)
3. –¢–æ—á–∫–∏ —Å–º–µ–Ω—ã ‚Üí –≥—Ä–∞–Ω–∏—Ü—ã —Å–µ–≥–º–µ–Ω—Ç–æ–≤
4. –ì—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –±–ª–∏–∂–∞–π—à–∏–º –ø—Ä–æ–±–µ–ª–∞–º
5. –ú–µ–ª–∫–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã (<15 —Å–∏–º–≤–æ–ª–æ–≤) —Å–ª–∏–≤–∞—é—Ç—Å—è —Å —Å–æ—Å–µ–¥—è–º–∏

### 6. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞

`is_already_plaintext()` –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–æ–∂–Ω—É—é –¥–µ—à–∏—Ñ—Ä–æ–≤–∫—É:
- ‚â•70% —Å–ª–æ–≤ –Ω–∞–π–¥–µ–Ω–æ –≤ —Å–ª–æ–≤–∞—Ä–µ ‚Üí –æ—Ç–∫—Ä—ã—Ç—ã–π
- IC > –ø–æ—Ä–æ–≥ –ò dict > 0.4 ‚Üí –æ—Ç–∫—Ä—ã—Ç—ã–π
- –ü–æ—Ä–æ–≥–∏ IC: 0.045 (RU), 0.055 (EN)

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- `frozenset` –¥–ª—è –∞–ª—Ñ–∞–≤–∏—Ç–æ–≤ –∏ –±–∏–≥—Ä–∞–º–º ‚Äî O(1) lookup
- `str.translate()` ‚Äî C-—É—Ä–æ–≤–µ–Ω—å –¥–µ—à–∏—Ñ—Ä–æ–≤–∫–∏
- `@lru_cache` –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ö –∑–∞–º–µ–Ω—ã
- –ü—Ä–µ–¥–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ regex –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–ª–æ–≤
- Set comprehension –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–æ–≤–∞—Ä—è
- –õ–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –°–ª–æ–∂–Ω–æ—Å—Ç—å

- –î–µ—à–∏—Ñ—Ä–æ–≤–∫–∞ –æ–¥–Ω–æ–≥–æ —Å–¥–≤–∏–≥–∞: O(n)
- –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä: O(k √ó n √ó w), k=—Ä–∞–∑–º–µ—Ä –∞–ª—Ñ–∞–≤–∏—Ç–∞, n=–¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞, w=–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤
- –ü–æ–∏—Å–∫ –≤ —Å–ª–æ–≤–∞—Ä–µ: O(1) amortized (hash set)
- –°–º–µ—à–∞–Ω–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–æ—Ä: O(n √ó k √ó W), W=—Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ**: —Ç–æ–ª—å–∫–æ stdlib (sys, re, argparse, pathlib, dataclasses, functools, collections)
- **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ**: `rich` (TUI)
